<?php use Magento\Framework\App\Action\Action; $productSku = "custom-request-form"; $customOptions = $this->getCustomOptions(); $blockObj= $block->getLayout()->createBlock('Dcw\CustomRequestForm\Block\Form'); $emailVal = $block->getConfig( 'generalconfiguration/validations/email', \Magento\Store\Model\ScopeInterface::SCOPE_STORE ); $phoneVal = $block->getConfig( 'generalconfiguration/validations/number', \Magento\Store\Model\ScopeInterface::SCOPE_STORE ); $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); $formKey=$objectManager->get('Magento\Framework\Data\Form\FormKey'); ?> <div class="product-info-main"><form class="form-validate" action="<?php echo $this->getUrl('customquoteform/quote/add'); ?>" id="custom-request-form" method="post" enctype="multipart/form-data" data-hasrequired="<?php echo __('* Required Fields') ?>" data-mage-init='{"validation":{}}'><div class="product-options-wrapper" id="product-options-wrapper"><div class="title"><h1> Custom Quote Form</h1></div><div class="select ops"><h2> Select options</h2></div><input name="form_key" type="hidden" value="<?php echo $formKey->getFormKey();?>"><?php $customOptionData = $customOptions->getData(); $counts = array_count_values(array_flip(array_column($customOptionData, 'group'))); $fileCount = $dateFieldCount = 0; $currentFilePointer = 1; $currentDatePointer = 1; foreach ($customOptions as $customOption){ if ($customOption->getData('type') == 'file') { $fileCount++; } if ($customOption->getData('type') == 'date') { $dateFieldCount++; } } ?> <?php foreach ($customOptions as $customOption) { $optionId = $customOption->getOptionId(); ?> <div class="fieldset"><?php $optionType = $customOption->getType(); if ($customOption->getData('is_require') == 1) { if ($optionType == 'radio') { $values = $customOption->getValues(); ?> <label class="label"><?php print_r($customOption->getData('default_title')); ?></label> <?php $i=1; ?> <?php foreach ($values as $radio) { $title = $radio->getTitle(); $ids = $optionId . "&" .$title; ?> <div class="required fields"><div class="maindiv"><div class="radio"><input type="<?php print_r($customOption->getData('type')); ?>" id="<?php echo $ids; ?>" name="<?php print_r($customOption->getData('option_id')); ?>" value="<?php print_r($radio->getOptionTypeId()); ?>" class="required-entry" <?php if($i==1) {echo "checked='checked'"; $i++; } ?>/><?php print_r($radio->getTitle()); ?><br/></div></div></div><?php } } elseif ($optionType == 'drop_down') { $values = $customOption->getValues();?> <div class="required fields"><div class="business drop_down"><?php if($customOption->getData('default_title')=='Country' || $customOption->getData('default_title')=='State/Province'){ ?> <?php if($customOption->getData('default_title')=='Country'){ ?> <div class="required fields"><div class="country drop_down"><div class="<?php print_r($customOption->getData('default_title')); ?>"><div class="field country required"><div class="control"><label for="country" class="label"><span><?php echo $block->escapeHtml(__('Country:')) ?></span></label> <select name="country_id" id="country" class="required-entry validate-select" title="Country" data-validate="{'validate-select':true}" aria-required="true"><option value="US" selected="selected">United States</option><option value="CA">Canada</option><option value="MX">Mexico</option><option value="AF">Afghanistan</option><option value="AX">Åland Islands</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AQ">Antarctica</option><option value="AG">Antigua &amp; Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BY">Belarus</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia &amp; Herzegovina</option><option value="BW">Botswana</option><option value="BV">Bouvet Island</option><option value="BR">Brazil</option><option value="IO">British Indian Ocean Territory</option><option value="VG">British Virgin Islands</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CV">Cape Verde</option><option value="BQ">Caribbean Netherlands</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CC">Cocos (Keeling) Islands</option><option value="CO">Colombia</option><option value="KM">Comoros</option><option value="CG">Congo - Brazzaville</option><option value="CD">Congo - Kinshasa</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="CI">Côte d’Ivoire</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CW">Curaçao</option><option value="CY">Cyprus</option><option value="CZ">Czechia</option><option value="DK">Denmark</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="GQ">Equatorial Guinea</option><option value="ER">Eritrea</option><option value="EE">Estonia</option><option value="SZ">Eswatini</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GG">Guernsey</option><option value="GN">Guinea</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="HM">Heard &amp; McDonald Islands</option><option value="HN">Honduras</option><option value="HK">Hong Kong SAR China</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IR">Iran</option><option value="IQ">Iraq</option><option value="IE">Ireland</option><option value="IM">Isle of Man</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JE">Jersey</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="XK">Kosovo</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LB">Lebanon</option><option value="LS">Lesotho</option><option value="LR">Liberia</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macao SAR China</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="FM">Micronesia</option><option value="MD">Moldova</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="MM">Myanmar (Burma)</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="MP">Northern Mariana Islands</option><option value="KP">North Korea</option><option value="MK">North Macedonia</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PS">Palestinian Territories</option><option value="PA">Panama</option><option value="PG">Papua New Guinea</option><option value="PY">Paraguay</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Islands</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="QA">Qatar</option><option value="RE">Réunion</option><option value="RO">Romania</option><option value="RU">Russia</option><option value="RW">Rwanda</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="ST">São Tomé &amp; Príncipe</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SX">Sint Maarten</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="SO">Somalia</option><option value="ZA">South Africa</option><option value="GS">South Georgia &amp; South Sandwich Islands</option><option value="KR">South Korea</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="BL">St. Barthélemy</option><option value="SH">St. Helena</option><option value="KN">St. Kitts &amp; Nevis</option><option value="LC">St. Lucia</option><option value="MF">St. Martin</option><option value="PM">St. Pierre &amp; Miquelon</option><option value="VC">St. Vincent &amp; Grenadines</option><option value="SD">Sudan</option><option value="SR">Suriname</option><option value="SJ">Svalbard &amp; Jan Mayen</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="SY">Syria</option><option value="TW">Taiwan, Province of China</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TL">Timor-Leste</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad &amp; Tobago</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks &amp; Caicos Islands</option><option value="TV">Tuvalu</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB">United Kingdom</option><option value="UY">Uruguay</option><option value="UM">U.S. Outlying Islands</option><option value="VI">U.S. Virgin Islands</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VA">Vatican City</option><option value="VE">Venezuela</option><option value="VN">Vietnam</option><option value="WF">Wallis &amp; Futuna</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="ZW">Zimbabwe</option></select></div></div></div></div><input type="hidden" name="country-option-id" value="<?php print_r($customOption->getData('option_id')); ?>"/></div><?php } ?> <?php if($customOption->getData('default_title')=='State/Province'){ ?> <div class="state drop_down"><div class="<?php print_r($customOption->getData('default_title')); ?>"><div class="field state custom"><div class="control"><label for="region_id_new" class="label"><span><?php echo __('State/Province:') ?></span></label> <select id="region_id_new" name="state" title="<?php echo __('State/Province') ?>" class="validate-select" style="display:none;"><option value=""><?php echo __('Please select a region, state or province.') ?></option></select> <input type="text" id="region" name="region" value="<?php echo $blockObj->getRegion() ?>" class="input-text <?php echo $blockObj->escapeHtmlAttr($this->helper('Magento\Customer\Helper\Address')->getAttributeValidationClass('region')) ?>" style="display:none;"></div><input type="hidden" name="state-option-id" value="<?php print_r($customOption->getData('option_id')); ?>"/></div></div></div><div class="not_availaible_dropdown" style="display:none"><label for="region_id_new" class="label"><span><?php echo __('State/Province:') ?></span></label> <select id="region_id" class="not_availaible_state" name="state_new" title="<?php echo __('State/Province') ?>" class="validate-select"><option value="N/A">N/A</option></select></div><?php }?> <?php }else{ ?> <div class="<?php print_r($customOption->getData('default_title')); ?>"><div class="control"><label class="label"><?php print_r($customOption->getData('default_title')); ?></label> <select id="drop" name="<?php print_r($customOption->getData('option_id')); ?>" class="validate-select required-entry" ><option value=""><?php echo __('Please Select') ?></option><?php foreach ($values as $v) { ?> <option value="<?php print_r($v->getOptionTypeId()); ?>"><?php print_r($v->getTitle()); ?></option><?php } ?></select></div></div><?php } ?></div></div><?php } elseif ($customOption->getData('type') == 'date') { ?> <div class="required fields"><div class="field date"><div class="form fields"><label class="label"><?php print_r($customOption->getData('default_title')); ?></label> <input type="text" required class="custom-date-picker" id="my-date_<?php echo $currentDatePointer ?>" placeholder="YYYY/MM/DD" name="<?php print_r($customOption->getData('option_id')); ?>" class="required-entry" data-validate="{required:true, 'validate-length':true}"/><br/><input type="hidden" name="date-option-id[]" value="<?php print_r($customOption->getData('option_id')); ?>"/></div></div><div class="error_msg" id="error_msg_<?php echo $currentDatePointer ?>" style="display:none;">This is a required field</div></div><?php $currentDatePointer++; ?> <?php } else{ if ($customOption->getData('type') == 'file') { ?> <div class="control uploadfile_<?php echo $currentFilePointer ?>" id="input-box-options_28_file" <?php if($currentFilePointer>1):?> style="display:none"<?php endif; ?>><!-- <div class="control" id="input-box-options_28_file" style="display:none"> --><?php if($currentFilePointer==1):?> <label class="label"><?php print_r($customOption->getData('default_title')); ?> <p class="note"> Compatible file extensions to upload: <strong>pdf, jpg, png, zip, csv, txt</strong></p></label> <?php endif; ?> <?php $optionName = "options_".$customOption->getData('option_id')."_file"; ?> <!-- <input name="<?php ?>" type="file" multiple /> --><div class="choosefile" ><input type="file" name="<?php echo $optionName ?>" data-error="error-<?php echo $currentFilePointer ?>" data-pip="pip-<?php echo $currentFilePointer ?>" data-removetag="remove-<?php echo $currentFilePointer ?>" id="uploadfileid-<?php echo $currentFilePointer?>" class="uploadfile required-entry" data-validate="{required:true, 'validate-length':true}" accept="pdf|jpg|png|.csv|.zip|.txt" /><input type="hidden" name="<?php echo $optionName ?>" value="save_new"><input type="hidden" value="<?php echo $optionName ?>" name="file_option_id"><?php if($currentFilePointer<$fileCount):?> <ul class ="add_another_file" id="uploadfile_<?php echo $currentFilePointer+1 ?>" style="cursor: pointer;"><li> <span style="margin-top:20px;"><button type="button" class="uplod-btn-custom">Add another file</button></span></li></ul><!-- <div class ="add_another_file" id="uploadfile_<?php ?>">Add Another file</div> --><?php endif; ?></div><!-- <?php ?> <p class="note"> Compatible file extensions to upload: <strong>pdf, jpg, png, zip, csv, txt</strong></p><?php ?> --><p class="invalid-error-msg" id="error-<?php echo $currentFilePointer ?>" style="display:none; color:#FF0000;"> Invalid File Format! File Format Must Be pdf, jpg, png, zip, csv, txt.</p><?php $currentFilePointer++; ?> <?php ?> <?php ?></div><?php if($currentFilePointer>$fileCount): ?> <div id="filelisttest"></div><?php endif; ?> <?php } else { if ($customOption->getData('default_title') == $emailVal) { ?> <div class="required fields"><div class="field email"><div class="form fields required"><label class="label"><?php print_r($customOption->getData('default_title')); ?></label> <input type="<?php print_r($customOption->getData('type')); ?>" id="emailaddress" name="<?php print_r($customOption->getData('option_id')); ?>" class="required-entry" data-validate="{required:true, 'validate-email':true,equalTo:'#emailaddress'}"/><br/></div></div></div><?php } elseif ($customOption->getData('default_title') == $phoneVal) { ?> <div class="required fields"><div class="field phone"><div class="form fields required"><label class="label"><?php print_r($customOption->getData('default_title')); ?></label> <input type="<?php print_r($customOption->getData('type')); ?>" id="<?php print_r($customOption->getData('default_title')); ?>" name="<?php print_r($customOption->getData('option_id')); ?>" class="required-entry input-credit validate-phoneStrict"/><br/></div></div></div><?php } else { ?> <div class="required fields"><div class="other fields"><div class="form fields required"><label class="label" ><?php print_r($customOption->getData('default_title')); ?></label> <?php if ($customOption->getData('max_characters') != 0){ ?> <input type="<?php print_r($customOption->getData('type')); ?>" id="<?php print_r($customOption->getData('default_title')); ?>" name="<?php print_r($customOption->getData('option_id')); ?>" class="input-text required-entry" data-validate="{required:true, 'validate-length':true}" maxlength="255"/><br/><div class="msg"><?php echo $block->escapeHtml(__(' Maximum 255 characters ')) ?></div><?php } else { ?> <input type="<?php print_r($customOption->getData('type')); ?>" id="<?php print_r($customOption->getData('default_title')); ?>" name="<?php print_r($customOption->getData('option_id')); ?>" class="input-text required-entry" data-validate="{required:true, 'validate-length':true}"/><br/><?php } ?></div></div></div><?php } } } ?> <?php } else { ?> <div class="nonrequired fields"><div class="form fields nonrequired"><?php if ($customOption->getData('type') == 'file') { ?> <div class="control uploadfile_<?php echo $currentFilePointer ?>" id="input-box-options_28_file" <?php if($currentFilePointer>1):?> style="display:none"<?php endif; ?>><!-- <div class="control" id="input-box-options_28_file" style="display:none"> --><?php if($currentFilePointer==1):?> <label class="label"><?php print_r($customOption->getData('default_title')); ?> <p class="note"> Compatible file extensions to upload: <strong>pdf, jpg, png, zip, csv, txt</strong></p></label> <?php endif; ?> <?php $optionName = "options_".$customOption->getData('option_id')."_file"; ?> <!-- <input name="<?php ?>" type="file" multiple /> --><div class="choosefile" ><input type="file" name="<?php echo $optionName ?>" data-error="error-<?php echo $currentFilePointer ?>" data-pip="pip-<?php echo $currentFilePointer ?>" data-removetag="remove-<?php echo $currentFilePointer ?>" id="uploadfileid-<?php echo $currentFilePointer?>" class="uploadfile" accept="pdf|jpg|png|.csv|.zip|.txt" /><input type="hidden" name="<?php echo $optionName ?>" value="save_new"><input type="hidden" value="<?php echo $optionName ?>" name="file_option_id"><?php if($currentFilePointer<$fileCount):?> <ul class ="add_another_file" id="uploadfile_<?php echo $currentFilePointer+1 ?>" style="cursor: pointer;"><li> <span style="margin-top:20px;"><button type="button" class="uplod-btn-custom">Add another file</button></span></li></ul><!-- <div class ="add_another_file" id="uploadfile_<?php ?>">Add Another file</div> --><?php endif; ?></div><!-- <?php ?> <p class="note"> Compatible file extensions to upload: <strong>pdf, jpg, png, zip, csv, txt</strong></p><?php ?> --><p class="invalid-error-msg" id="error-<?php echo $currentFilePointer ?>" style="display:none; color:#FF0000;"> Invalid File Format! File Format Must Be pdf, jpg, png, zip, csv, txt.</p><?php $currentFilePointer++; ?> <?php ?> <?php ?></div><?php if($currentFilePointer>$fileCount): ?> <div id="filelisttest"></div><?php endif; ?> <?php ?> <?php }elseif ($customOption->getData('type') == 'date') { ?> <div class="required fields"><div class="field date"><div class="form fields"><label class="label"><?php print_r($customOption->getData('default_title')); ?></label> <input type="text" class="custom-date-picker" id="my-date_<?php echo $currentDatePointer ?>" placeholder="YYYY/MM/DD" name="<?php print_r($customOption->getData('option_id')); ?>" /><br/><input type="hidden" name="date-option-id[]" value="<?php print_r($customOption->getData('option_id')); ?>"/></div></div><div class="error_msg" id="error_msg_<?php echo $currentDatePointer ?>" style="display:none;">This is a required field</div></div><?php $currentDatePointer++; ?> <?php }elseif ($customOption->getData('type') == 'drop_down') { $values = $customOption->getValues();?> <div class="<?php print_r($customOption->getData('default_title')); ?>"><div class="control"><label class="label"><?php print_r($customOption->getData('default_title')); ?></label> <select id="drop" name="<?php print_r($customOption->getData('option_id')); ?>" ><option value=""><?php echo __('Please Select') ?></option><?php foreach ($values as $v) { ?> <option value="<?php print_r($v->getOptionTypeId()); ?>"><?php print_r($v->getTitle()); ?></option><?php } ?></select></div></div><?php }elseif ($customOption->getData('type') == 'radio') { $values = $customOption->getValues(); ?> <label class="label"><?php print_r($customOption->getData('default_title')); ?></label> <?php $i=1; ?> <?php foreach ($values as $radio) { $title = $radio->getTitle(); $ids = $optionId . "&" .$title; ?> <div class="required fields"><div class="maindiv"><div class="radio"><input type="<?php print_r($customOption->getData('type')); ?>" id="<?php echo $ids; ?>" name="<?php print_r($customOption->getData('option_id')); ?>" value="<?php print_r($radio->getOptionTypeId()); ?>" <?php if($i==1) {echo "checked='checked'"; $i++; } ?>/><?php print_r($radio->getTitle()); ?><br/></div></div></div><?php } ?> <?php }else{?> <div class="<?php print_r($customOption->getData('default_title')); ?>"><div class="form fields"><label class="label"><?php print_r($customOption->getData('default_title')); ?></label> <?php if ($customOption->getData('max_characters') != 0){ ?> <input type="<?php print_r($customOption->getData('type')); ?>" id="<?php print_r($customOption->getData('default_title')); ?>" name="<?php print_r($customOption->getData('option_id')); ?>" maxlength="255"/><br/><div class="msg"><?php echo $block->escapeHtml(__(' Maximum 255 characters ')) ?></div><?php } else { ?> <input type="<?php print_r($customOption->getData('type')); ?>" id="<?php print_r($customOption->getData('default_title')); ?>" name="<?php print_r($customOption->getData('option_id')); ?>"/><br/><?php } ?></div></div><?php } ?></div></div><?php }?></div><?php } ?> <!-- <div id="filelisttest"></div> --><div class="button requestform"><button type="submit" name="submit" class="btn-submit"><span>SUBMIT QUOTE REQUEST</span></button></div></div><!--</div></div> --></form></div><!-- <script type="text/javascript">
  var myForm= new VarienForm('custom-request-form', true);</script> --><script>
require([
         "jquery",
         "mage/calendar"
         ], function ($) {
           var current = 1;
           $('.custom-date-picker').each(function(i, obj) {
             $('#my-date_'+current).datepicker({
                                 dateFormat: "yy/mm/dd",
                                 timeFormat: "H:m:s",
                                 changeMonth: true,
                                 changeYear: true,
                                 numberOfMonths: 1,
                                 showsTime: true,
                                 minDate: new Date()
                             });
              current++;
            });
});</script><script type="text/x-magento-init">
    {
        "#country": {
            "regionUpdater": {
                "optionalRegionAllowed": <?= /* @noEscape */ $blockObj->getConfig('general/region/display_all') ? 'true' : 'false' ?>,
                "regionListId": "#region_id_new",
                "regionInputId": "#region",
                "postcodeId": "#zip",
                "form": "#custom-request-form",
                "regionJson": <?= /* @noEscape */ $this->helper(\Magento\Directory\Helper\Data::class)->getRegionJson() ?>,
                "defaultRegion": "<?= (int) $block->getRegionId() ?>",
                "countriesWithOptionalZip": <?= /* @noEscape */ $this->helper(\Magento\Directory\Helper\Data::class)->getCountriesWithOptionalZip(true) ?>
            }
        }
    }</script><script type="text/javascript"></script><script type="text/javascript"></script><!-- <script type="text/x-magento-init">
 {
        "[data-role=tocart-form], .form.map.checkout": {
            "catalogAddToCart": {
                "addToQuoteButtonSelector": "[data-role=addToQuoteButton]",
                "addToCartButtonSelector": "[data-role=addToCartButton]"
            }
        }
    }</script> --><!-- <script type="text/javascript">
    $("#custom-request-form").keypress(function() {
    if($(this).val().length > 255) {
        
   }
});</script> --><script type="text/javascript">

  require([
         "jquery"
         ], function ($) {
         
           $(".uploadfile").on('change', function(){
             console.log(this);
             var fileUploadId = $(this).attr('id');
             var pipClassName = $(this).attr('data-pip');
             var removeClassName = $(this).attr('data-removetag');
             var removeId = $(this).attr('data-error');
             var ext = $('#'+fileUploadId).val().split('.').pop().toLowerCase();
         if ($.inArray(ext, ['png','jpg','jpeg','pdf','txt','csv','zip']) == -1){
          $('#'+removeId).slideDown("slow");
          $('#'+fileUploadId).val('');
           a=0;
          }else{
            a=1;
              $('#'+removeId).slideUp("slow");
              var files = $(this)[0].files;
              
              $('.'+pipClassName).remove();
              console.log(files);
               
                   $("<span id=\"pip-file\" class="+pipClassName+">" +
                     files[0].name+
                     "<br/><span id=\"remove-chos-file\" class="+removeClassName+">Remove</span>" +
                     "</span>").insertAfter("#filelisttest");
                   $("."+removeClassName).click(function(){
                     $(this).parent('.'+pipClassName).remove();
                     $('#'+fileUploadId).empty();
                     $('#'+fileUploadId).val('');
                   });
             
         }
           });


      $("#country").on('change', function(){
        var wto;
        clearTimeout(wto);
         wto = setTimeout(function() {
           
           if($('#region').css('display') == 'none')
           {
               console.log("false");
               var countryVal =  $('#country').find(":selected").val();
               if(countryVal=='FR' || countryVal=='AT' || countryVal=='BE' || countryVal=='FI' ||
                countryVal=='DE')
               {
                 jQuery('#region_id_new').removeAttr("disabled");
               }
               
               $('.state.drop_down').show();
               $('.not_availaible_dropdown').hide();
           }
           else{
             $('.state.drop_down').hide();
             $('#region').hide();
             $('.not_availaible_dropdown').show();
             console.log("true");
           }
         }, 10);

          
          
          
      });
});
require(['jquery', 'jquery/ui'], function($){
  $("#custom-request-form").submit(function(){
    var current = 1;
      $('.custom-date-picker').each(function(i, obj) {
          var dateFieldValue = $('#my-date_'+current).val();
          if(dateFieldValue=='')
          {
            $('#error_msg_'+current).show();
            current++;
          }
          console.log(dateFieldValue);
      });
  });
    $(".add_another_file").click(function(){
      console.log(this.id);
      var uploadId = this.id;
      $("."+uploadId).show();
      $(this).hide();
    });
});</script>