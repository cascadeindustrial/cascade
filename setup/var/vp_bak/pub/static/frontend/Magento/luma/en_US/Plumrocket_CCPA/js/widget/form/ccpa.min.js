define(['jquery','uiElement','Magento_Customer/js/customer-data','mage/translate'],function($,element,customerData){'use strict';return element.extend({initialize:function(){this._super();this.form=$('#prgdpr-ccpa-form');try{this.form.loader('hide');}catch(e){console.info('Loader is not initialized.');}},submit:function(){var self=this;if(this.form.validation()&&this.form.validation('isValid')&&this.isAvailable()!==false){this.form.submit($.ajax({showLoader:true,method:'post',data:self.form.serializeArray(),url:self.ccpa_request_url,success:function(response){if(response.success){customerData.reload(['ccpa_data']);}
if(response.redirect){window.location.replace(response.redirect);}}}));}},getLastUpdated:function(){var lastUpdated=customerData.get('ccpa_data')().last_update;return lastUpdated?lastUpdated:$.mage.__('Never');},getCcpaAccepded:function(){return customerData.get('ccpa_data')().sell_info_status;},isAvailable:function(){return customerData.get('ccpa_data')().is_available;},getMessages:function(){if(false===this.isAvailable()){return[$.mage.__('Sorry, only California residents can submit “Do Not Sell My Personal Information” requests')];}
return[];}});});