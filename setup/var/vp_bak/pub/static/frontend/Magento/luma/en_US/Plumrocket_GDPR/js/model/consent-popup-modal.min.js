define(['jquery','Magento_Ui/js/modal/modal','mage/storage','mage/translate','Plumrocket_GDPR/js/model/fancybox-fix'],function($,modal,storage,$t,fancyBoxFix){'use strict';return{createModal:function(element,consent){var title=(consent.cms_page)?consent.cms_page.title:null;var options={'type':'popup','modalClass':'prgdpr-consent-popup-modal','responsive':true,'innerScroll':true,'title':title,'buttons':[{text:$t('I agree'),class:'action iagree primary',click:function(){if(consent.cms_page){consent.checkboxLabel=$t('I agree');}
storage.post(consent.agreeUrl,JSON.stringify({'consent':consent}),true);this.closeModal();}}],opened:function($Event){$('.modal-header button.action-close',$Event.currentTarget).remove();$('header.modal-header',$Event.currentTarget).append($('.prgdpr-consent-content-actions',$Event.currentTarget));fancyBoxFix.hideFancyBox();},closed:function($Event){fancyBoxFix.showFancyBox();},keyEventHandlers:{escapeKey:function(){}}};modal(options,$(element)).openModal();}};});