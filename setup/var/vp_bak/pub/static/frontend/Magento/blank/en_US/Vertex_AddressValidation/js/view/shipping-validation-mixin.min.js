define(['jquery','underscore','uiRegistry','Magento_Checkout/js/model/quote'],function($,_,uiRegistry,quote){'use strict';return function(Component){return Component.extend({vertexMessage:{},initialize:function(){this._super();$(document).on('afterValidate',function(event,vertexMessage,stopOnSuccess){if(!stopOnSuccess&&vertexMessage.type===0){this.vertexMessage=vertexMessage;this.setShippingInformation();this.vertexMessage={};}else{this.vertexMessage=vertexMessage;}}.bind(this));return this;},validateShippingInformation:function(){var superResult=this._super(),self=this,config=window.checkoutConfig,validationConfig=config.vertexAddressValidationConfig,shippingData=quote.shippingAddress(),componentValidation=uiRegistry.get('checkout.steps.shipping-step.shippingAddress'+'.before-shipping-method-form.shippingAdditional'+'.shipping-address-messages');if(!validationConfig.isAddressValidationEnabled||!componentValidation||!superResult||!quote.shippingAddress().isEditable()||validationConfig.countryValidation.indexOf(shippingData.countryId)===-1){return superResult;}
if(Object.values(self.vertexMessage).length>0){componentValidation.removeMessage();this.vertexMessage={};return superResult;}
if(superResult){componentValidation.addressValidation();return false;}
this.vertexMessage={};return superResult;}});};});