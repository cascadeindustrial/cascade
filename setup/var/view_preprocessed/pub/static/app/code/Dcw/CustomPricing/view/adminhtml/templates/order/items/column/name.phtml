<?php /** * Copyright Â© Magento, Inc. All rights reserved. * See COPYING.txt for license details. */ ?> <?php /* @var $block \Magento\Sales\Block\Adminhtml\Items\Column\Name */ $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); $resource = $objectManager->get('Magento\Framework\App\ResourceConnection'); $request = $objectManager->get('Magento\Framework\App\Request\Http'); $productRepository = $objectManager->get('\Magento\Catalog\Model\ProductRepository'); $connection = $resource->getConnection(); $orderId = $request->getParam('order_id'); $_item = $block->getItem(); $deliveryOption = $connection->fetchCol("SELECT shipping_option FROM sales_order_item WHERE item_id = ".(int) $_item->getId()." and order_id = " .$orderId); ?> <?php if ($_item = $block->getItem()) : ?> <div id="order_item_<?= (int) $_item->getId() ?>_title" class="product-title"><?= $block->escapeHtml($_item->getName()) ?></div><div class="product-sku-block"><span><?= $block->escapeHtml(__('SKU'))?>:</span> <?= /* @noEscape */ implode('<br />', $this->helper(\Magento\Catalog\Helper\Data::class)->splitSku($block->escapeHtml($block->getSku()))) ?></div><?php if ($_item->getProduct() != '') { ?> <div class="sales-delivery-options"><?php $productObj = $productRepository->get($_item->getSku()); ?> <?php if (in_array(1, $deliveryOption)) { echo "Standard Delivery: ".$productObj->getAttributeText('standard_delivery_time'); } elseif (in_array(2, $deliveryOption)){ echo "Expedited Delivery: ".$productObj->getAttributeText('expedited_delivery_time'); } ?></div><div class="model"><?php $productObj = $productRepository->get($_item->getSku()); ?> <?php echo "Model: ".$productObj->getData('model_no'); ?></div><?php } ?> <?php if ($block->getOrderOptions()) : ?> <dl class="item-options"><?php foreach ($block->getOrderOptions() as $_option) : ?> <dt><?= $block->escapeHtml($_option['label']) ?>:</dt><dd><?php if (isset($_option['custom_view']) && $_option['custom_view']) : ?> <?= /* @noEscape */ $block->getCustomizedOptionValue($_option) ?> <?php else : ?> <?php $_option = $block->getFormattedOption($_option['value']); ?> <?php $dots = 'dots' . uniqid(); ?> <?php $id = 'id' . uniqid(); ?> <?= $block->escapeHtml($_option['value'], ['a', 'br']) ?><?php if (isset($_option['remainder']) && $_option['remainder']) : ?><span id="<?= /* @noEscape */ $dots; ?>"> ...</span><span id="<?= /* @noEscape */ $id; ?>"><?= $block->escapeHtml($_option['remainder'], ['a']) ?></span> <script>
                                require(['prototype'], function() {
                                    $('<?= /* @noEscape */ $id; ?>').hide();
                                    $('<?= /* @noEscape */ $id; ?>').up().observe('mouseover', function(){$('<?= /* @noEscape */ $id; ?>').show();});
                                    $('<?= /* @noEscape */ $id; ?>').up().observe('mouseover', function(){$('<?= /* @noEscape */ $dots; ?>').hide();});
                                    $('<?= /* @noEscape */ $id; ?>').up().observe('mouseout',  function(){$('<?= /* @noEscape */ $id; ?>').hide();});
                                    $('<?= /* @noEscape */ $id; ?>').up().observe('mouseout',  function(){$('<?= /* @noEscape */ $dots; ?>').show();});
                                });</script><?php endif; ?> <?php endif; ?></dd><?php endforeach; ?></dl><?php endif; ?> <?= $block->escapeHtml($_item->getDescription()) ?> <?php endif; ?>