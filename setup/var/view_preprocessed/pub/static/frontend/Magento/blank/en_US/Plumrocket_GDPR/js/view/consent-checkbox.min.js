define(['ko','jquery','uiComponent','Plumrocket_GDPR/js/model/consent-checkbox-modal',],function(ko,$,Component,consentModal){'use strict';return Component.extend({defaults:{template:'Plumrocket_GDPR/consent-checkbox'},initialize:function(){this._super();if(typeof this.checkboxes==='string'){this.checkboxes=JSON.parse(this.checkboxes);}},isVisible:true,locationKey:window.consentCheckboxesLocation,checkboxes:window.consentCheckboxesConfig,getPrgdprLocation:function(){return this.locationKey;},showContent:function(data,event){var checkboxId=$(event.target).data('checkboxid');consentModal.showModal(checkboxId,data);},getCheckboxId:function(context,consentId){var checkboxIdSuffix='',paymentMethodRenderer=context.$parents[1];if(paymentMethodRenderer){checkboxIdSuffix=paymentMethodRenderer.item?paymentMethodRenderer.item.method:'';}
if(!checkboxIdSuffix){checkboxIdSuffix=context.$data.name;}
return consentId+'_'+checkboxIdSuffix;},initModal:function(element,consent){var checkboxId=$(element).data('checkboxid');consentModal.createModal(element,consent,checkboxId);},isChecked:function(checkbox){return checkbox.isAlreadyChecked===true;},isDisabled:function(checkbox){return checkbox.isAlreadyChecked&&checkbox.canDecline===false;},checkboxesRendered:function(){$(document).trigger('checkboxes_rendered');},getCmsPageVersion:function(checkbox){return checkbox.cms_page?checkbox.cms_page.version:0;},getRequiredConsents:function(){return Array.isArray(this.checkboxes)?this.checkboxes.filter(function(checkbox){return!checkbox.canDecline;}):[];},getOptionalConsents:function(){return Array.isArray(this.checkboxes)?this.checkboxes.filter(function(checkbox){return checkbox.canDecline;}):[];},});});