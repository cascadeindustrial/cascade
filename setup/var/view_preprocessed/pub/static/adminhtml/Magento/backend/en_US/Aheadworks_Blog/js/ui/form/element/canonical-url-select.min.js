define(['underscore','uiRegistry','Magento_Ui/js/form/element/select'],function(_,registry,Select){'use strict';return Select.extend({defaults:{queryTemplate:'ns = ${ $.ns }, index = category_ids'},initialize:function(){this._super();this.setHandlers();return this;},setHandlers:function(){registry.get(this.queryTemplate,function(component){component.on('value',this.updateValue.bind(this,component));}.bind(this));},updateValue:function(component){var source=component.cacheOptions.plain,selectedValues=component.value(),currentValue=this.value(),result=[];selectedValues.forEach(function(selectedValue){result.push(_.findWhere(source,{value:selectedValue}));});this.setOptions(result);if(_.indexOf(selectedValues,currentValue)){this.value(currentValue);}}});});