define(['jquery','jquery/ui','uiComponent','ko'],function($,ui,Component,ko){'use strict';return Component.extend({defaults:{template:'Cart2Quote_Quotation/system/config/grid/statuses'},statusesFields:ko.observableArray(),statusesData:null,name:null,label:null,htmlId:null,initFieldValue:null,observableField:function(label,name,limitation,locked,finalized){this.label=ko.observable(label);this.name=ko.observable(name);this.limitation=ko.observable(limitation);this.locked=ko.observable(locked);this.finalized=ko.observable(finalized);},initObservable:function(){var self=this;this.initFields(this.data);var initialData=this.initFieldValue;if(initialData===null){initialData=this.getDefaultValues();}else{if(initialData.length!==this.getDefaultValues().length){$.each(this.getDefaultValues(),function(defaultIndex,defaultValue){var found=false;var defaultName=defaultValue.name;$.each(initialData,function(index,value){var name=value.name;if(name===defaultName){found=true;return false;}});if(found===false){initialData.push(defaultValue);}});}}
this.statusesFields=ko.observableArray(ko.utils.arrayMap(initialData,function(field){return new self.observableField(field.label,field.name,field.limitation,field.locked,field.finalized,);}));return this;},getDefaultValues:function(){var statuses=this.statuses;var defaultValues=[];for(var i=0;i<statuses.length;++i){defaultValues.push({label:statuses[i].label,name:statuses[i].value,limitation:true,locked:false,finalized:false});}
return defaultValues;},initFields:function(data){this.statusesData=ko.utils.parseJson(data);this.name=this.statusesData.field.name;this.label=this.statusesData.field.label;this.statuses=this.statusesData.field.statuses;this.htmlId=this.statusesData.field.htmlId;this.initFieldValue=ko.utils.parseJson(this.statusesData.field.fieldValue);},getstatusesFields:function(){var self=this;return self.statusesFields();}});});