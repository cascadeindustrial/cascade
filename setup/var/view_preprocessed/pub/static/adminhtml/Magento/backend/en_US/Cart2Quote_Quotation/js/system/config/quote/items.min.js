define(['jquery','jquery/ui','uiComponent','ko'],function($,ui,Component,ko){'use strict';return Component.extend({defaults:{template:'Cart2Quote_Quotation/system/config/quote/items'},itemsFields:ko.observableArray(),itemsData:null,name:null,label:null,htmlId:null,initFieldValue:null,observableField:function(label,name,visibility){this.label=ko.observable(label);this.name=ko.observable(name);this.visibility=ko.observable(visibility);},initObservable:function(){var self=this;this.initFields(this.data);var initialData=this.initFieldValue;if(initialData===null){initialData=this.getDefaultValues();}else{if(initialData.length!==this.getDefaultValues().length){$.each(this.getDefaultValues(),function(defaultIndex,defaultValue){var found=false;var defaultName=defaultValue.name;$.each(initialData,function(index,value){var name=value.name;if(name===defaultName){found=true;return false;}});if(found===false){initialData.push(defaultValue);}});}}
this.itemsFields=ko.observableArray(ko.utils.arrayMap(initialData,function(field){return new self.observableField(field.label,field.name,field.visibility,);}));return this;},getDefaultValues:function(){var items=this.items;var defaultValues=[];for(var i=0;i<items.length;++i){defaultValues.push({label:items[i].label,name:items[i].value,visibility:true,});}
return defaultValues;},initFields:function(data){this.itemsData=ko.utils.parseJson(data);this.name=this.itemsData.field.name;this.label=this.itemsData.field.label;this.items=this.itemsData.field.items;this.htmlId=this.itemsData.field.htmlId;this.initFieldValue=ko.utils.parseJson(this.itemsData.field.fieldValue);},getItemsFields:function(){var self=this;return self.itemsFields();}});});