<?php
 namespace Cart2Quote\License\Http; final class Client { protected $d7XHW = "\154\x6f\143\141\x6c\150\157\x73\x74"; protected $RPkFZ = 443; protected $rvV8o = null; protected $mnvKh = array(); protected $sUlLi = array(); protected $EsX8R = array(); protected $W6nry = array(); protected $ai5R3 = ''; protected $n0loP = 0; protected $lQog0 = 5; protected $KbVBg = 5; protected $uoK4x = 0; protected $AITeY; protected $zV86d = array(); protected $rmrVT = 0; private $BiAQf; private $PYtqT; private $pUXzt; private $F3k6l; private final function __construct() { goto hraVT; hraVT: $this->BiAQf = \Magento\Framework\App\ObjectManager::getInstance()->get("\x5c\x43\x61\x72\164\62\x51\x75\157\164\x65\134\x51\x75\157\164\141\164\151\157\x6e\134\110\145\x6c\x70\x65\162\134\x44\x61\x74\x61\x5c\x4d\145\x74\141\144\x61\164\x61\111\x6e\x74\x65\162\146\x61\143\x65"); goto Th0qx; QwqXW: $this->pUXzt = \Magento\Framework\App\ObjectManager::getInstance()->get("\x5c\x4d\x61\x67\145\156\x74\x6f\x5c\x46\x72\141\155\145\167\157\x72\153\x5c\x4d\x6f\x64\x75\x6c\145\x5c\115\141\x6e\141\147\145\x72"); goto AyEnu; Th0qx: $this->PYtqT = \Magento\Framework\App\ObjectManager::getInstance()->get("\x5c\115\141\147\145\156\x74\157\134\x42\141\x63\x6b\145\x6e\144\134\x4d\157\144\x65\x6c\x5c\125\x72\154\111\x6e\x74\145\x72\146\x61\143\x65"); goto QwqXW; AyEnu: } public static final function getInstance() { goto YC2t3; YC2t3: static $TcTyj = null; goto TY9ao; GfXRa: $TcTyj = new self(); goto V2Tuo; V2Tuo: mBumI: goto oKdBw; oKdBw: return $TcTyj; goto m1pWl; TY9ao: if (!($TcTyj === null)) { goto mBumI; } goto GfXRa; m1pWl: } public final function getLicense() { return $this->retrieveLicenseData(); } public final function setProposalSent() { $this->proposalSent(); } private final function retrieveLicenseData() { goto cNa4C; r_SXU: $this->doError(new \Magento\Framework\Phrase("\125\156\141\x62\x6c\145\40\x74\x6f\40\162\145\x74\x72\x69\x65\x76\145\x20\154\x69\143\145\156\163\x65\40\x64\x61\164\x61\40\x66\162\157\155\40\163\145\162\x76\x65\x72")); goto HYJkv; Kwf_I: $nyzF0 = json_decode($this->getBody(), true); goto we5Ui; cNa4C: $this->addHeader("\x41\x63\x63\145\x70\x74", "\x61\x70\x70\x6c\151\143\141\x74\151\157\x6e\x2f\x6a\x73\157\x6e"); goto cL9fi; sGBKp: FjUHy: goto r_SXU; PbS3Z: $this->post(sprintf("\x25\x73\57\45\163", $this->getApiUrl(), $this->getApiLicenseEndpoint()), $this->preparePostData()); goto Kwf_I; cL9fi: $this->setCredentials($this->getApiUsername(), $this->getApiKey()); goto PbS3Z; q1ZfH: return base64_decode($nyzF0["\x64\x61\164\x61"]); goto sGBKp; we5Ui: if (!isset($nyzF0["\x64\141\164\x61"])) { goto FjUHy; } goto q1ZfH; HYJkv: } private final function proposalSent() { goto nSBxU; t5IyH: $this->post(sprintf("\45\163\57\x25\x73", $this->getApiUrl(), $this->getApiDomainEndpoint()), ["\x74\x6c\x64" => parse_url($this->PYtqT->getBaseUrl(), PHP_URL_HOST)]); goto IYMKN; DWjyN: $this->setCredentials($this->getApiUsername(), $this->getApiKey()); goto t5IyH; nSBxU: $this->addHeader("\x41\x63\x63\x65\x70\x74", "\x61\160\x70\x6c\151\143\141\x74\151\157\x6e\x2f\152\x73\x6f\156"); goto DWjyN; IYMKN: } public function addHeader($IZSTZ, $F6eUB) { $this->mnvKh[$IZSTZ] = $F6eUB; } public function setCredentials($Ambry, $aJXh5) { $h2IdK = base64_encode("{$Ambry}\72{$aJXh5}"); $this->addHeader("\x41\165\x74\x68\x6f\x72\151\172\141\164\151\x6f\x6e", "\102\141\163\x69\143\x20{$h2IdK}"); } private final function getApiUsername() { return "\x61\x35\145\144\x39\63\143\x62\64\x35\62\x38\70\141\x37\66\141\65\142\144\62\66\x65\x32\65\x63\x33\62\x62\x66\x35\x32\x63\x62\142\x64\x64\x64\66\62"; } private final function getApiKey() { return "\70\x35\x62\x62\x33\x65\61\66\x35\x35\x33\x35\65\142\146\65\x31\66\61\144\64\62\146\70\64\63\x39\x63\63\x62\x36\60\146\x61\x31\x62\x31\x61\71\67"; } public function setOption($IZSTZ, $F6eUB) { $this->zV86d[$IZSTZ] = $F6eUB; } public function post($JYZHe, $uGmXG) { $this->makeRequest("\x50\117\123\124", $JYZHe, $uGmXG); } protected function makeRequest($Qv7xg, $JYZHe, $uGmXG = array()) { goto iuebQ; j76Qf: mZ58u: goto bzGsS; aHqlT: $this->ai5R3 = curl_exec($this->AITeY); goto Qrqtl; VtFn9: kTKrI: goto MraMD; YpkDo: curl_close($this->AITeY); goto bRmCz; Crl7M: foreach ($this->mnvKh as $CV8fL => $P2DM2) { $vxILJ[] = $CV8fL . "\72\40" . $P2DM2; GT0pK: } goto Wvpqd; GPUWC: $this->curlOption(CURLOPT_POSTFIELDS, is_array($uGmXG) ? http_build_query($uGmXG) : $uGmXG); goto ebxfu; KG1nw: $this->curlOption(CURLOPT_HEADERFUNCTION, [$this, "\x70\141\162\163\x65\x48\145\x61\144\x65\162\x73"]); goto BSjXr; E6gq7: $this->curlOption(CURLOPT_HTTPHEADER, $vxILJ); goto j76Qf; g3rzc: vuwH9: goto IGJqa; kxF3N: goto hUuN0; goto n0x3U; WW36a: $this->W6nry = []; goto aHqlT; VOsqY: if (!$sapiP) { goto hByGf; } goto nI4Le; nI4Le: $this->doError(curl_error($this->AITeY)); goto DcBPg; VBiXg: SH_aA: goto hmp5v; U4z72: $ewqcP = []; goto G1BeH; iuebQ: $this->AITeY = curl_init(); goto pIbpa; gxGba: GhuK5: goto FvAxd; BSjXr: if (!($this->F3k6l !== null)) { goto iGdzk; } goto KRxie; hmp5v: snlrz: goto hzgGz; dpw7o: QsQTw: goto IwX2b; f4Pqp: iGdzk: goto b7Mgr; VH1DF: Hbkg8: goto Z2Is1; JOsL5: $this->curlOption(CURLOPT_SSL_VERIFYPEER, 0); goto CmEql; ttdGB: $this->curlOption(CURLOPT_CONNECTTIMEOUT, $this->KbVBg); goto LlcQv; OOJ__: if (!count($this->mnvKh)) { goto mZ58u; } goto JqBr7; pIbpa: $this->curlOption(CURLOPT_URL, $JYZHe); goto JTZzk; b7Mgr: $this->curlOption(CURLOPT_SSL_VERIFYHOST, 0); goto JOsL5; MraMD: if (!($this->RPkFZ != 443)) { goto QsQTw; } goto o0BOx; o0BOx: $this->curlOption(CURLOPT_PORT, $this->RPkFZ); goto dpw7o; CmEql: if (!count($this->zV86d)) { goto snlrz; } goto PvkiC; G1BeH: foreach ($this->EsX8R as $CV8fL => $P2DM2) { $ewqcP[] = "{$CV8fL}\75{$P2DM2}"; olH0u: } goto gxGba; vV4Q1: $this->curlOption(CURLOPT_CUSTOMREQUEST, $Qv7xg); goto kxF3N; Z2Is1: $this->curlOption(CURLOPT_HTTPGET, 1); goto NzWCT; hzgGz: $this->rmrVT = 0; goto WW36a; Qrqtl: $sapiP = curl_errno($this->AITeY); goto VOsqY; n0x3U: NhLTb: goto pqTPj; IwX2b: $this->curlOption(CURLOPT_RETURNTRANSFER, 1); goto KG1nw; wcVqK: if ($Qv7xg == "\107\105\x54") { goto Hbkg8; } goto vV4Q1; LlcQv: $this->curlOption(CURLOPT_TIMEOUT, $this->lQog0); goto VtFn9; Wvpqd: qTRoU: goto E6gq7; pqTPj: $this->curlOption(CURLOPT_POST, 1); goto GPUWC; JqBr7: $vxILJ = []; goto Crl7M; bzGsS: if (!count($this->EsX8R)) { goto vuwH9; } goto U4z72; NzWCT: hUuN0: goto OOJ__; FvAxd: $this->curlOption(CURLOPT_COOKIE, implode("\x3b", $ewqcP)); goto g3rzc; IGJqa: if (!($this->lQog0 && $this->KbVBg)) { goto kTKrI; } goto ttdGB; KRxie: $this->curlOption(CURLOPT_SSLVERSION, $this->F3k6l); goto f4Pqp; DcBPg: hByGf: goto YpkDo; PvkiC: foreach ($this->zV86d as $CV8fL => $P2DM2) { $this->curlOption($CV8fL, $P2DM2); DSlLj: } goto VBiXg; ebxfu: goto hUuN0; goto VH1DF; JTZzk: if ($Qv7xg == "\x50\x4f\x53\x54") { goto NhLTb; } goto wcVqK; bRmCz: } protected function curlOption($IZSTZ, $F6eUB) { curl_setopt($this->AITeY, $IZSTZ, $F6eUB); } public function doError($rwkO5) { throw new \Exception($rwkO5); } private final function getApiUrl() { return "\x68\164\x74\160\163\x3a\x2f\x2f\144\x61\x73\x68\142\157\x61\162\x64\62\56\x63\x61\x72\164\62\x71\165\x6f\x74\145\56\143\x6f\x6d\x2f\141\x70\x69\57\x76\x34"; } private final function getApiLicenseEndpoint() { return "\154\x69\143\145\156\163\x65\x73\x2f\x75\x70\144\x61\x74\145\56\x6a\163\157\156"; } private final function getApiDomainEndpoint() { return "\x64\157\155\x61\x69\x6e\163\57\x75\x70\144\x61\164\145\x2e\x6a\163\x6f\156"; } public function getBody() { return $this->ai5R3; } public function setTimeout($F6eUB) { $this->lQog0 = (int) $F6eUB; } public function removeHeader($IZSTZ) { unset($this->mnvKh[$IZSTZ]); } public function addCookie($IZSTZ, $F6eUB) { $this->EsX8R[$IZSTZ] = $F6eUB; } public function removeCookie($IZSTZ) { unset($this->EsX8R[$IZSTZ]); } public function removeCookies() { $this->setCookies([]); } public function get($JYZHe) { $this->makeRequest("\x47\x45\x54", $JYZHe); } public function getHeaders() { return $this->W6nry; } public function setHeaders($P9bu5) { $this->mnvKh = $P9bu5; } public function getCookies() { goto zNmee; rYm4D: return $dtZxW; goto dGPmt; pJzuB: foreach ($this->W6nry["\x53\x65\x74\x2d\103\x6f\157\x6b\x69\x65"] as $RZ7yh) { goto Xfyut; nokBK: if (!($h2IdK === null)) { goto qXhVz; } goto lIdUD; Xfyut: $jUzLo = explode("\73\x20", $RZ7yh); goto EV2YP; EV2YP: $w74hA = count($jUzLo); goto iv749; iv749: if ($w74hA) { goto CyNH5; } goto LPxkO; XllYc: qXhVz: goto e_fbF; ndqTo: CyNH5: goto dZWAj; lIdUD: goto a2e12; goto XllYc; e_fbF: $dtZxW[trim($UNRjI)] = trim($h2IdK); goto annNP; annNP: a2e12: goto UFoiN; LPxkO: goto a2e12; goto ndqTo; dZWAj: list($UNRjI, $h2IdK) = explode("\75", $jUzLo[0]); goto nokBK; UFoiN: } goto zmHLk; qhWt7: $dtZxW = []; goto pJzuB; zNmee: if (!empty($this->W6nry["\x53\145\164\x2d\103\x6f\157\153\x69\145"])) { goto Veb8a; } goto sh12w; ZkBfc: Veb8a: goto qhWt7; zmHLk: ViM7k: goto rYm4D; sh12w: return []; goto ZkBfc; dGPmt: } public function setCookies($ewqcP) { $this->EsX8R = $ewqcP; } public function getCookiesFull() { goto tiywo; zTIhh: kuBiY: goto FWuSv; FWuSv: $dtZxW = []; goto RHrfI; hGhqj: return $dtZxW; goto lFanu; RHrfI: foreach ($this->W6nry["\123\145\x74\55\x43\157\x6f\x6b\x69\x65"] as $RZ7yh) { goto vfM7y; EFonj: OoDNf: goto GGjpx; fzyHN: goto zcmK1; goto YY1i8; vfM7y: $jUzLo = explode("\x3b\40", $RZ7yh); goto WN8fY; eQQA8: goto zcmK1; goto c6ekB; x01S1: array_shift($jUzLo); goto AuYSq; gLjcp: if (!($h2IdK === null)) { goto rIKX8; } goto eQQA8; aZi8f: Tq957: goto AKUfb; MqjVS: if ($jueR4) { goto jku_F; } goto fzyHN; ZGPhk: $otCR2++; goto NUPki; WN8fY: $jueR4 = count($jUzLo); goto MqjVS; XwwWh: goto zcmK1; goto TLWgY; GGjpx: if (!($otCR2 < $jueR4)) { goto Tq957; } goto RbFiI; AKUfb: zcmK1: goto uU1P9; c6ekB: rIKX8: goto G0ByH; G0ByH: $dtZxW[trim($UNRjI)] = ["\166\x61\x6c\x75\x65" => trim($h2IdK)]; goto x01S1; AuYSq: $jueR4--; goto jY0PD; YY1i8: jku_F: goto Whh6p; NUPki: goto OoDNf; goto aZi8f; zi0JT: $otCR2 = 0; goto EFonj; Whh6p: list($UNRjI, $h2IdK) = explode("\75", $jUzLo[0]); goto gLjcp; RbFiI: list($IJFei, $h2IdK) = explode("\75", $jUzLo[$otCR2]); goto bJnEH; jY0PD: if ($jueR4) { goto TPN1d; } goto XwwWh; GsJuJ: eMzwN: goto ZGPhk; bJnEH: $dtZxW[trim($UNRjI)][trim($IJFei)] = trim($h2IdK); goto GsJuJ; TLWgY: TPN1d: goto zi0JT; uU1P9: } goto WA3lu; WA3lu: hBF6G: goto hGhqj; tiywo: if (!empty($this->W6nry["\123\x65\x74\55\103\x6f\157\153\151\x65"])) { goto kuBiY; } goto p5Bs3; p5Bs3: return []; goto zTIhh; lFanu: } public function getStatus() { return $this->n0loP; } public function setOptions($pKG9B) { $this->zV86d = $pKG9B; } protected function parseHeaders($HdkOg, $lZ1fK) { goto nAwvU; nAwvU: if ($this->rmrVT == 0) { goto KgDOo; } goto K9kFi; K9kFi: $IZSTZ = $F6eUB = ''; goto wvqvM; hrBdv: goto PHA2G; goto dL69t; QY8X5: if (!(count($bAS3R) < 2)) { goto GsM_Q; } goto lKYmU; Kajlu: $F6eUB = $dtZxW[1]; goto kqXiv; NaEMM: $IZSTZ = $dtZxW[0]; goto Kajlu; nNgr5: if (isset($this->W6nry[$IZSTZ])) { goto uDOk9; } goto qNkhx; K97N3: PHA2G: goto Sv4dJ; OTeoA: if (!(count($dtZxW) == 2)) { goto rT2OH; } goto NaEMM; iOecZ: GsM_Q: goto HENSQ; wvqvM: $dtZxW = explode("\x3a\40", trim($lZ1fK), 2); goto OTeoA; VhW37: $bAS3R = explode("\40", trim($lZ1fK), 3); goto QY8X5; qNkhx: $this->W6nry[$IZSTZ] = []; goto iNNuh; dcrQt: g82El: goto YHSmw; HENSQ: $this->n0loP = intval($bAS3R[1]); goto dcrQt; lKYmU: $this->doError("\x49\x6e\166\x61\154\151\x64\x20\162\x65\x73\160\x6f\156\x73\145\40\154\x69\156\145\x20\162\145\x74\x75\162\156\x65\x64\40\146\162\157\x6d\40\163\145\162\166\145\x72\x3a\40" . $lZ1fK); goto iOecZ; R99Se: return strlen($lZ1fK); goto EvXdF; Puczo: $this->W6nry[$IZSTZ][] = $F6eUB; goto K97N3; XueVU: if ("\123\145\x74\x2d\x43\x6f\157\x6b\x69\145" == $IZSTZ) { goto i17fI; } goto TXmA6; Zg9vb: goto g82El; goto sNLLh; YHSmw: $this->rmrVT++; goto R99Se; kqXiv: rT2OH: goto jy_Ig; sNLLh: KgDOo: goto VhW37; jy_Ig: if (!strlen($IZSTZ)) { goto mKelL; } goto XueVU; iNNuh: uDOk9: goto Puczo; Sv4dJ: mKelL: goto Zg9vb; dL69t: i17fI: goto nNgr5; TXmA6: $this->W6nry[$IZSTZ] = $F6eUB; goto hrBdv; EvXdF: } protected function curlOptions($pKG9B) { curl_setopt_array($this->AITeY, $pKG9B); } private function preparePostData() { $nVYoF = ["\x6c\x69\143\x65\x6e\163\145" => ["\x6f\x72\x64\x65\x72\x5f\151\144" => $this->BiAQf->getOrderId()], "\x74\154\x64" => parse_url($this->PYtqT->getBaseUrl(), PHP_URL_HOST), "\x70\150\x70\137\x76\x65\162\163\151\x6f\x6e" => $this->BiAQf->getPhpVersion(), "\x6d\x32\x5f\x76\145\x72\x73\x69\157\156" => $this->BiAQf->getMagentoVersion(), "\x6d\62\137\145\x64\x69\x74\151\157\x6e" => $this->BiAQf->getMagentoEdition(), "\151\143\x5f\166\x65\162\163\x69\x6f\x6e" => $this->BiAQf->getIoncubeVersion(), "\x63\x32\161\x5f\166\145\x72\x73\x69\157\156" => $this->BiAQf->getCart2QuoteVersion(), "\x6e\62\x6f\137\166\145\x72\x73\151\x6f\156" => !$this->pUXzt->isEnabled("\103\x61\162\164\62\x51\165\157\x74\145\137\x4e\x6f\164\62\117\162\x64\x65\x72") ? null : $this->BiAQf->getNot2OrderVersion(), "\x73\x64\137\x76\x65\x72\163\151\157\156" => !$this->pUXzt->isEnabled("\103\141\x72\164\62\121\165\157\x74\x65\137\x44\x65\163\x6b") ? null : $this->BiAQf->getSupportDeskVersion(), "\144\x65\137\166\145\x72\163\151\157\156" => !$this->pUXzt->isEnabled("\103\141\x72\164\x32\121\x75\157\164\x65\x5f\104\145\163\153\105\x6d\141\x69\154") ? null : $this->BiAQf->getDeskEmailVersion()]; return $nVYoF; } }